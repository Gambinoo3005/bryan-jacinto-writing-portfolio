@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* Tell Tailwind v4: apply `dark:` styles when `.dark` is on a parent */
@custom-variant dark (&:where(.dark, .dark *));

@theme {
  --font-sans: "Inter", "Plus Jakarta Sans", ui-sans-serif, system-ui, Arial, sans-serif;
  --font-serif: "Source Serif 4", ui-serif, Georgia, serif;
}

html { font-family: var(--font-sans); }

/* Long-form reading uses the serif; headings stay in sans */
.prose { font-family: var(--font-serif); }
.prose h1, .prose h2, .prose h3,
.prose h4, .prose strong, .prose b,
.prose blockquote,
.prose code, .prose pre {
  font-family: var(--font-sans);
}

/* Palette tokens */
:root {
  --color-bg: #E8F2FF;
  --color-surface: #FFFFFF;
  --color-text: #0C1222;
  --color-heading: #0A1A2E;
  --color-muted: #5B6472;
  --color-border: #D9E0EA;
  --color-link: #0A5CFF;
  --color-accent: #0E3357;
  --header-bg: #D6E8FF;

  --surface-glass: color-mix(in srgb, var(--color-surface) 78%, transparent);
  --surface-glass-strong: color-mix(in srgb, var(--color-surface) 88%, transparent);
}

.dark {
  --color-bg: #090E18;
  --color-surface: #0C1220;
  --color-text: #E8EDF7;
  --color-heading: #F0F4F8;
  --color-muted: #A6ADBB;
  --color-border: #2B3140;
  --color-link: #4A7C9D;
  --color-accent: #0E3357;
  --header-bg: #0B1420;

  --surface-glass: color-mix(in srgb, var(--color-surface) 62%, transparent);
  --surface-glass-strong: color-mix(in srgb, var(--color-surface) 74%, transparent);
}


body {
  min-height: 100svh;
  background-color: var(--color-bg);
  color: var(--color-text);
}

a {
  color: var(--color-link);
  transition: color 180ms ease;
}

a:hover {
  color: color-mix(in srgb, var(--color-link) 78%, var(--color-accent) 22%);
}

.dark a:hover {
  color: color-mix(in srgb, var(--color-link) 86%, white 14%);
}

.prose {
  --tw-prose-body: var(--color-text);
  --tw-prose-headings: var(--color-heading);
  --tw-prose-links: var(--color-link);
  --tw-prose-bold: var(--color-text);
  --tw-prose-counters: var(--color-muted);
  --tw-prose-bullets: var(--color-muted);
  --tw-prose-hr: var(--color-border);
  --tw-prose-quotes: var(--color-text);
  --tw-prose-quote-borders: var(--color-border);
  --tw-prose-captions: var(--color-muted);
  --tw-prose-code: var(--color-accent);
  color: var(--color-text);
}

.dark .prose {
  --tw-prose-code: var(--color-link);
}

/* ===========================
   Smooth light/dark transitions
   =========================== */
@media (prefers-reduced-motion: no-preference) {
  /* Cross-fade core UI colors */
  .theme-xfade,
  .theme-xfade * {
    transition:
      background-color 520ms ease,
      color 520ms ease,
      border-color 520ms ease,
      fill 520ms ease,
      stroke 520ms ease,
      box-shadow 520ms ease;
  }

  /* Ease gradients/vignette too */
  .theme-xfade .bg-base,
  .theme-xfade .bg-vignette {
    transition: background 520ms ease;
  }

  /* Soft veil overlay to mask abrupt pops during the swap */
  .theme-xfade::before {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 50;
    background: linear-gradient(180deg, rgba(0,0,0,.04), rgba(0,0,0,.02));
    opacity: 0;
    transition: opacity 520ms ease;
  }

  /* In dark mode, use a lighter veil so it doesn't over-darken */
  .theme-xfade.dark::before {
    background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
  }

  /* Activate veil during the crossfade */
  .theme-xfade.theme-xfade--active::before {
    opacity: .8; /* tweak between .5 and .9 per taste */
  }
}

/* Reusable icon button */
@utility icon-btn {
  @apply inline-flex items-center justify-center h-10 w-10 rounded-full transition;
  background-color: var(--surface-glass);
  border: 1px solid color-mix(in srgb, var(--color-border) 92%, transparent);
  color: color-mix(in srgb, var(--color-text) 92%, transparent);
  box-shadow: 0 10px 30px rgba(14, 51, 87, 0.08);
}

.icon-btn:hover {
  background-color: var(--surface-glass-strong);
  border-color: var(--color-border);
  color: var(--color-text);
  box-shadow: 0 12px 36px rgba(14, 51, 87, 0.12);
}

/* Nav pill buttons */
@utility nav-link {
  @apply inline-flex h-10 items-center justify-center px-3 rounded-full text-[13px] font-semibold uppercase tracking-wider leading-none transition;
  color: color-mix(in srgb, var(--color-text) 88%, transparent);
}

.nav-link:hover {
  color: var(--color-link);
}

/* Active page state */
@utility nav-link-active {
  color: var(--color-link);
  background-color: color-mix(in srgb, var(--color-surface) 86%, transparent);
  border: 1px solid color-mix(in srgb, var(--color-border) 90%, transparent);
}

/* ---------- Layout stability + gutter color (RIGHT edge only) ---------- */
html {
  overflow-y: scroll;        /* always reserve vertical scrollbar area */
  scrollbar-gutter: stable;  /* right edge only - no left strip */
  background-color: var(--bg-end); /* paints the gutter on some UAs */
}

/* Make sure the page itself always fills the viewport height */
body { min-height: 100svh; }

/* Global hover nudge effect for buttons and header links */
button:hover,
.btn-primary:hover,
.icon-btn:hover,
.nav-link:hover,
header a:hover,
a[href="/contact"]:hover,
a[href="/work"]:hover {
  transform: translateY(-1px);
  transition: transform 150ms ease-out;
}

button:active,
.btn-primary:active,
.icon-btn:active,
.nav-link:active,
header a:active,
a[href="/contact"]:active,
a[href="/work"]:active {
  transform: translateY(0);
  transition: transform 100ms ease-out;
}

/* Button styles to ensure proper visibility and no unwanted outlines */
.btn-primary {
  background-color: var(--color-link) !important;
  color: white !important;
  border: none !important;
  outline: none !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.btn-primary:hover {
  filter: brightness(1.1) !important;
}

.btn-primary:active {
  filter: brightness(0.95) !important;
}

.btn-primary:focus-visible {
  outline: none !important;
  box-shadow: 0 0 0 2px white, 0 0 0 4px var(--color-link) !important;
}
