---
const nav = [
  { href: "/about", label: "About" },
  { href: "/work", label: "Work" },      // or "Portfolio"
  { href: "/contact", label: "Contact" }
];

// Replace with your real info
const LINKS = {
  linkedin: "https://www.linkedin.com/in/YOUR-USERNAME",
  phone: "+63-900-000-0000",
  email: "you@example.com",
};

const current = Astro.url.pathname;
---
<header class="sticky top-0 z-50 bg-gradient-to-b from-[var(--header-from)] to-[var(--header-to)] py-3 text-[var(--color-text)]">
  <div class="mx-auto max-w-6xl px-4">
    <!-- grid: 1fr (left) | auto (center nav) | 1fr (right) -->
    <div
      class="h-16 grid grid-cols-[1fr_auto_1fr] items-center
             rounded-2xl bg-[var(--surface-glass-strong)]
             border border-[var(--color-border)]
             shadow-xl shadow-black/5 ring-1 ring-black/5
             px-3 sm:px-5"
    >
      <!-- Left: Home icon -->
      <div class="justify-self-start">
        <a href="/" aria-label="Home" class="icon-btn" title="Home">
          <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M3 10.5L12 3l9 7.5" />
            <path d="M5 10v10h14V10" />
            <path d="M9 20v-6h6v6" />
          </svg>
        </a>
      </div>

      <!-- CENTER: perfectly centered nav -->
      <nav class="hidden md:flex justify-center items-center gap-2 justify-self-center">
        {nav.map((n) => {
          const isActive = current === n.href || (n.href !== "/" && current.startsWith(n.href));
          return (
            <a
              href={n.href}
              class={`nav-link ${isActive ? "nav-link-active" : ""}`}
              aria-current={isActive ? "page" : undefined}
            >
              {n.label}
            </a>
          );
        })}
      </nav>

      <!-- Right: icons + CV + theme -->
      <div class="hidden md:flex justify-self-end items-center gap-2">
        <a href={LINKS.linkedin} target="_blank" rel="noopener" class="icon-btn" aria-label="LinkedIn" title="LinkedIn">
          <svg viewBox="0 0 24 24" class="h-5 w-5" fill="currentColor" aria-hidden="true">
            <path d="M4.98 3.5a2.5 2.5 0 11.02 5 2.5 2.5 0 01-.02-5zM3 8.98h3.96V21H3zM9.5 8.98H13v1.63h.06c.49-.88 1.69-1.8 3.48-1.8 3.72 0 4.4 2.27 4.4 5.22V21h-3.96v-4.8c0-1.14-.02-2.62-1.6-2.62-1.6 0-1.84 1.25-1.84 2.53V21H9.5z"/>
          </svg>
        </a>

        <a href={`tel:${LINKS.phone.replace(/\s+/g, "")}`} class="icon-btn" aria-label={`Call ${LINKS.phone}`} title={LINKS.phone}>
          <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M22 16.92v2a2 2 0 0 1-2.18 2A19.8 19.8 0 0 1 3.08 4.18 2 2 0 0 1 5 2h2a2 2 0 0 1 2 1.72c.12.86.31 1.7.57 2.5a2 2 0 0 1-.45 2.11L8 9a16 16 0 0 0 7 7l.67-1.12a2 2 0 0 1 2.11-.45c.8.26 1.64.45 2.5.57A2 2 0 0 1 22 16.92z"/>
          </svg>
        </a>

        <a href={`mailto:${LINKS.email}`} class="icon-btn" aria-label={`Email ${LINKS.email}`} title={LINKS.email}>
          <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z"/>
            <path d="m22 6-10 7L2 6"/>
          </svg>
        </a>

        <a href="/cv/bryan-jacinto-cv.pdf" download
           class="inline-flex items-center justify-center h-10 px-4 rounded-full
                  text-[12.5px] font-semibold uppercase tracking-wider
                  bg-[#0e3357] text-white hover:brightness-110 active:brightness-95
                  shadow-sm hover:shadow-md transition
                  focus-visible:outline outline-2 outline-offset-2 outline-[#0e3357]">
          Download CV
        </a>

        <button id="theme-toggle" aria-label="Switch to dark mode" aria-pressed="false" class="icon-btn" title="Toggle theme">
          <span class="sr-only">Toggle theme</span>
          <span class="relative inline-block h-5 w-5">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
                 class="absolute inset-0 h-5 w-5 transform-gpu origin-center transition-all duration-300 ease-out opacity-100 scale-100 rotate-0 dark:opacity-0 dark:scale-50 dark:rotate-180"
                 stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <circle cx="12" cy="12" r="4" />
              <path d="M12 2v2M12 20v2M4 12H2M22 12h-2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41" />
            </svg>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"
                 class="absolute inset-0 h-5 w-5 transform-gpu origin-center transition-all duration-300 ease-out opacity-0 scale-50 -rotate-180 dark:opacity-100 dark:scale-100 dark:rotate-0"
                 stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <path d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z" />
            </svg>
          </span>
        </button>
      </div>
    </div>

    <!-- Mobile panel (unchanged) -->
    <nav id="mobile-menu" class="md:hidden mt-2 hidden rounded-2xl bg-[var(--surface-glass-strong)] border border-[var(--color-border)] shadow-xl ring-1 ring-black/5 px-4 py-3">
      <ul class="flex flex-col gap-1">
        {nav.map((n) => (
          <li>
            <a href={n.href}
               class="block rounded-lg px-3 py-2 text-[13px] font-semibold uppercase tracking-wider text-[var(--color-text)] hover:bg-[var(--surface-glass)]">
              {n.label}
            </a>
          </li>
        ))}

        <li class="pt-2">
          <div class="flex items-center gap-2">
            <a href="/" class="icon-btn w-full justify-center" aria-label="Home">
              <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M3 10.5L12 3l9 7.5"/><path d="M5 10v10h14V10"/><path d="M9 20v-6h6v6"/>
              </svg>
              <span class="sr-only">Home</span>
            </a>
            <a href={LINKS.linkedin} target="_blank" rel="noopener" class="icon-btn w-full justify-center" aria-label="LinkedIn">
              <svg viewBox="0 0 24 24" class="h-5 w-5" fill="currentColor" aria-hidden="true">
                <path d="M4.98 3.5a2.5 2.5 0 11.02 5 2.5 2.5 0 01-.02-5zM3 8.98h3.96V21H3zM9.5 8.98H13v1.63h.06c.49-.88 1.69-1.8 3.48-1.8 3.72 0 4.4 2.27 4.4 5.22V21h-3.96v-4.8c0-1.14-.02-2.62-1.6-2.62-1.6 0-1.84 1.25-1.84 2.53V21H9.5z"/>
              </svg>
            </a>
            <a href={`tel:${LINKS.phone.replace(/\s+/g, "")}`} class="icon-btn w-full justify-center" aria-label="Phone">
              <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M22 16.92v2a2 2 0 0 1-2.18 2A19.8 19.8 0 0 1 3.08 4.18 2 2 0 0 1 5 2h2a2 2 0 0 1 2 1.72c.12.86.31 1.7.57 2.5a2 2 0 0 1-.45 2.11L8 9a16 16 0 0 0 7 7l.67-1.12a2 2 0 0 1 2.11-.45c.8.26 1.64.45 2.5.57A2 2 0 0 1 22 16.92z"/>
              </svg>
            </a>
            <a href={`mailto:${LINKS.email}`} class="icon-btn w-full justify-center" aria-label="Email">
              <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path d="M4 4h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z"/>
                <path d="m22 6-10 7L2 6"/>
              </svg>
            </a>
          </div>
        </li>

        <li class="pt-3">
          <a href="/cv/bryan-jacinto-cv.pdf" download
             class="inline-flex items-center justify-center w-full h-10 rounded-full
                    text-[12.5px] font-semibold uppercase tracking-wider
                    bg-[#0e3357] text-white hover:brightness-110 active:brightness-95
                    shadow-sm hover:shadow-md transition
                    focus-visible:outline outline-2 outline-offset-2 outline-[#0e3357]">
            Download CV
          </a>
        </li>
      </ul>
    </nav>
  </div>
</header>

<script>
  /// <reference lib="dom" />

  const btn = document.querySelector("[data-menu-button]");
  const panel = document.getElementById("mobile-menu");
  btn?.addEventListener("click", () => {
    const nowHidden = panel?.classList.toggle("hidden");
    btn.setAttribute("aria-expanded", String(!nowHidden));
  });

  function syncButtons(isDark) {
    const label = isDark ? "Switch to light mode" : "Switch to dark mode";
    for (const id of ["theme-toggle", "theme-toggle-mobile"]) {
      const el = document.getElementById(id);
      if (!el) continue;
      el.setAttribute("aria-pressed", isDark ? "true" : "false");
      el.setAttribute("aria-label", label);
    }
  }

  /** @param {boolean} isDark */
  function setTheme(isDark) {
    const root = document.documentElement;
    root.classList.toggle("dark", isDark);
    try { localStorage.setItem("theme", isDark ? "dark" : "light"); } catch {}
    syncButtons(isDark);
  }

  function toggleTheme() {
    const root = document.documentElement;
    setTheme(!root.classList.contains("dark"));
  }

  document.getElementById("theme-toggle")?.addEventListener("click", toggleTheme);
  document.getElementById("theme-toggle-mobile")?.addEventListener("click", toggleTheme);

  syncButtons(document.documentElement.classList.contains("dark"));
</script>

